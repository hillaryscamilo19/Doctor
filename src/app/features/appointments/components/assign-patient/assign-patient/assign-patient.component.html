<div class="container">
  <h2>Doctor Appointment System</h2>
  
  <!-- Tabs -->
  <div class="tabs-container">
    <div class="tab" [class.active]="activeTab === 'patients'" (click)="setActiveTab('patients')">Pacientes</div>
    <div class="tab" [class.active]="activeTab === 'doctors'" (click)="setActiveTab('doctors')">Doctores</div>
  </div>
  
  <!-- Patient Cards -->
  <div class="card-grid" *ngIf="activeTab === 'patients'">
    <div class="patient-card" *ngFor="let patient of patients">
      <h3>{{ patient.nombre }}</h3>
      <p class="symptom">{{ patient.sintoma }}</p>
      
      <div class="doctor-assignment" *ngIf="patient.doctorAsignado">
        <div class="assigned-doctor">
          <span class="doctor-icon"><i class="bi bi-person"></i></span>
          <span>{{ patient.doctorAsignado.nombre }}</span>
          <button class="remove-btn" (click)="removeAssignment(patient)">×</button>
        </div>
        <div class="specialty-tag">{{ patient.doctorAsignado.especialidad }}</div>
      </div>
      
      <div class="action-buttons" *ngIf="!patient.doctorAsignado">
        <button class="btn btn-auto-assign" (click)="assignAutomatically(patient)">
          <i class="bi bi-lightning"></i> Asignar Automáticamente
        </button>
        <button class="btn btn-manual-assign" (click)="assignManually(patient)">
          <i class="bi bi-person"></i> Asignar Manualmente
        </button>
      </div>
    </div>
  </div>
  
  <!-- Doctor Cards -->
  <div class="doctor-grid" *ngIf="activeTab === 'doctors' && doctors.length > 0">
    <div class="doctor-card" *ngFor="let doctor of doctors" 
         [class.available]="doctor.isAvailable" 
         [class.unavailable]="!doctor.isAvailable">
      <div class="doctor-header">
        <h3>{{ doctor.nombre }}</h3>
        <span class="status-badge" [class.available]="doctor.isAvailable" [class.unavailable]="!doctor.isAvailable">
          {{ doctor.isAvailable ? 'Disponible' : 'No disponible' }}
        </span>
      </div>
      
      <div class="doctor-info">
        <p><strong>Especialidad:</strong> {{ doctor.especialidad }}</p>
      </div>
      
      <div class="doctor-actions" *ngIf="doctor.isAvailable">
        <button class="btn btn-primary" (click)="selectDoctor(doctor)">
          <i class="bi bi-person-plus"></i> Asignar Paciente
        </button>
      </div>
    </div>
  </div>
  
  <!-- Assignment Modal (shown when manual assignment is clicked) -->
  <div class="assignment-modal" *ngIf="showAssignmentModal">
    <div class="modal-content">
      <h3>Asignar Paciente Manualmente</h3>
      
      <div class="form-group">
        <label for="patientName">Paciente</label>
        <select id="patientName" class="form-control" [(ngModel)]="selectedPatientId">
          <option value="">-- Selecciona un paciente --</option>
          <option *ngFor="let patient of patientsWithoutDoctor" [value]="patient.id">
            {{ patient.nombre }} - {{ patient.sintoma }}
          </option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="doctorName">Doctor</label>
        <select id="doctorName" class="form-control" [(ngModel)]="selectedDoctorId">
          <option value="">-- Selecciona un doctor --</option>
          <option *ngFor="let doctor of availableDoctors" [value]="doctor.id">
            {{ doctor.nombre }} - {{ doctor.especialidad }}
          </option>
        </select>
      </div>
      
      <div class="modal-actions">
        <button class="btn btn-cancel" (click)="cancelAssignment()">Cancelar</button>
        <button class="btn btn-confirm" 
                [disabled]="!selectedPatientId || !selectedDoctorId"
                (click)="confirmAssignment()">
          Confirmar Asignación
        </button>
      </div>
    </div>
  </div>
</div>